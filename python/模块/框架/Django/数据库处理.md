## 在postgre中新建一个djdemo数据库
```sql
create database djdemo
```

## 配置postgre数据库
>Django中使用postgre的第一项准备是安装psycopg2模块,mac下我之前已安装:conda install psycopg2

1.在项目配置文件settings.py的DATABASES选项下修改配置
先将默认的sqlite3数据库配置注释掉
```py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',     # 指定postgres引擎
        'NAME': 'djdemo',                              # 数据库名,Django不会帮你创建,需要自己进入数据库创建
        'USER': 'mt',                                  # 默认用户名
        'PASSWORD': 'postgres',                        # 数据库密码
        'HOST': '127.0.0.1',
        'PORT': '5432',
      }
    }
```

2.在数据库管理文件model.py下新建2个模型
- question包括描述和发布时间字段
- choice包括选项和当前得票数,并且使用外键约束来限制每个选项属于那个问题

```py
from django.db import models

class Question(models.Model):
    question_text = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    question = models.ForeignKey(Question, on_delete=models.CASCADE)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)    
```

3.激活模型
- makemigrations 为模型的改变生成迁移文件
- migrate 执行迁移
```sh
python3.9 manage.py makemigrations
python3.9 manage.py migrate
```
